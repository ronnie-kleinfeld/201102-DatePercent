<?xml version="1.0" encoding="utf-8"?>
<List:VListBase xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:mx="library://ns.adobe.com/flex/mx"
				width="100%" height="100%"
				initialize="initializeHandler(event)"
				xmlns:List="UI.List.*" xmlns:Button="UI.Button.*">
	<fx:Metadata>
		[Event(name=LIST_ITEM_CLICKED, type="UI.List.ListItemEvent")]
	</fx:Metadata>
	<fx:Script>
		<![CDATA[
			import Data.Presents.PresentData;
			import Data.Presents.PresentDataCollection;
			
			import mx.events.FlexEvent;

			protected override function get DoFillByTimer():Boolean
			{
				return false;
			}
			protected override function get AddItemByCollectionEvent():Boolean
			{
				return false;
			}
			
			private function initializeHandler(event:FlexEvent):void
			{
				m_scroller = scroller;
				m_hvGroup = hGroup;
			}
			
			protected override function DoFillStep():void
			{
				for (var i:int = 0; i < m_iPaintedListItemCount; i++)
				{
					var photoData:PhotoData = SessionHandler.Instance.Session.Me.Photos.FindItemPhotoDataByIndex(i);
					if (FindListItemByID(photoData.ID) == null)
					{
						AddMyPhotosListItem(photoData);
					}
				}
				
				InvalidatePrevNext();
				DoShowRemove();
			}
			
			protected override function collectionBase_OBJECT_ADDED(event:CollectionEvent):void
			{
				if (AddItemByCollectionEvent)
				{
					AddMyPhotosListItem(PhotoData(event.ObjectData));
				}
			}
			
			private function AddMyPhotosListItem(p_photoData:PhotoData):void
			{
				var myPhotosListItem:MyPhotosListItem = new MyPhotosListItem();
				myPhotosListItem.Init(p_photoData);
				AddListItem(myPhotosListItem, false);
			}
			
			public function DoShowRemove():void
			{
				for (var i:int = 0; i < hGroup.numElements; i++)
				{
					var myPhotosListItem:MyPhotosListItem = MyPhotosListItem(hGroup.getElementAt(i));
					myPhotosListItem.clickPhoto.DoShowRemove();
				}
			}
			
			
			
			public override function DoPaint():void
			{
				for (var i:int = 0; i < m_iPaintedListItemCount; i++)
				{
					var p_presentData:PresentData = PresentDataCollection(m_ac).FindItemPresentDataByIndex(i);
					if (!ContainsByID(p_presentData.ID))
					{
						AddPresentsListItem(p_presentData);	
					}
				}
			}
			
			private function AddPresentsListItem(p_presentData:PresentData):void
			{
				var listItem:PresentsListItem = new PresentsListItem();
				listItem.GetData(p_presentData);
				AddListItem(listItem, false);
				listItem.DoAdd(p_presentData.ID, 180, 59);
			}
		]]>
	</fx:Script>
	<s:VGroup width="100%" height="100%" horizontalAlign="center" verticalAlign="middle">
		<Button:ClickButton visible="{m_bPrevVisible}" m_png="{PrevPng}" CLICKED="DoMovePrev()" m_strTooltip="{m_strToolTipPrev}"/>
		<s:Scroller id="scroller" width="100%" height="100%" horizontalScrollPolicy="off" verticalScrollPolicy="off">
			<s:Group width="100%" height="100%">
				<s:VGroup id="vGroup" width="100%" height="100%" clipAndEnableScrolling="false" paddingTop="2" paddingBottom="2" gap="7"/>
			</s:Group>
		</s:Scroller>
		<Button:ClickButton visible="{m_bNextVisible}" m_png="{NextPng}" CLICKED="DoMoveNext()" m_strTooltip="{m_strToolTipNext}"/>
	</s:VGroup>
</List:VListBase>